# File name: test.kv
<VKeyboard>:
	height: 500
	layout : 'numeric'
	layout_path : '/home/pi/gpmb/'

<SaveScreen>:
	name:'scrsave'
	img:img.__self__
	FloatLayout:
		Button:
			text: ""
			on_press:root.backbtn()
		Image:
			id:img
			source:'/home/pi/gpmb/img/0.jpg'
			size: root.size
			nocache: True

<TXIN@TextInput>:
	multiline:False
	font_size: 40
	padding:12,5,5,0
<KButton@Button>:
	font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
	color: .8,.9,0,1
	font_size: 40
<PWDScreen>:
	pt1:_pt1.__self__
	pt2:_pt2.__self__
	pt3:_pt3.__self__
	pt4:_pt4.__self__
	pt5:_pt5.__self__
	pt6:_pt6.__self__
	pt7:_pt7.__self__
	pt8:_pt8.__self__
	lbe:_lbe.__self__
	
	name:'pwdscr'
	BoxLayout:
		orientation:'vertical'

		GridLayout:
			cols: 1
			spacing:10
			padding:10,0,10,0
			row_force_default:True
			row_default_height:58
			
			Label:
				text: ''
				font_size: 40
			Label:
				text: '请输入密码'
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			Label:
				id:_lbe
				text: ''
				color:1,0,0,1
				font_size: 24
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'

		GridLayout:
			cols: 8
			spacing:10
			padding:10,0,10,60
			row_force_default:True
			row_default_height:58

			KButton:
				text:'+'
				on_press:root.press_am("bt1",1)
			KButton:
				text:'+'
				on_press:root.press_am("bt2",1)
			KButton:
				text:'+'
				on_press:root.press_am("bt3",1)
			KButton:
				text:'+'
				on_press:root.press_am("bt4",1)
			KButton:
				text:'+'
				on_press:root.press_am("bt5",1)
			KButton:
				text:'+'
				on_press:root.press_am("bt6",1)
			KButton:
				text:'+'
				on_press:root.press_am("bt7",1)
			KButton:
				text:'+'
				on_press:root.press_am("bt8",1)

			TXIN:
				id:_pt1
			TXIN:
				id:_pt2
			TXIN:
				id:_pt3
			TXIN:
				id:_pt4
			TXIN:
				id:_pt5
			TXIN:
				id:_pt6
			TXIN:
				id:_pt7
			TXIN:
				id:_pt8

			KButton:
				text:'-'
				on_press:root.press_am("bt1",-1)
			KButton:
				text:'-'
				on_press:root.press_am("bt2",-1)
			KButton:
				text:'-'
				on_press:root.press_am("bt3",-1)
			KButton:
				text:'-'
				on_press:root.press_am("bt4",-1)
			KButton:
				text:'-'
				on_press:root.press_am("bt5",-1)
			KButton:
				text:'-'
				on_press:root.press_am("bt6",-1)
			KButton:
				text:'-'
				on_press:root.press_am("bt7",-1)
			KButton:
				text:'-'
				on_press:root.press_am("bt8",-1)

		GridLayout:
			cols: 2
			spacing:10
			padding:10,0,10,60
			row_force_default:True
			row_default_height:88
			Button:
				text: '返回'
				color: 1,1,1,1
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				on_press:root.press_back()
			Button:
				text: '确认'
				color: 1,1,1,1
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				on_press:root.press_submit()

		GridLayout:
			cols: 2


<amButton@Button>:
	font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
	pos: 0, 100
	size: 100, 50
	color: .8,.9,0,1
	font_size: 40
<SettingsScreen>:
	time1:_time1.__self__
	time3:_time3.__self__
	time4:_time4.__self__
	time6:_time6.__self__
	time2:_time2.__self__
	time5:_time5.__self__

	name:'settings'
	BoxLayout:
		orientation:'vertical'

		GridLayout:
			cols: 1
			spacing:10
			padding:10,0,10,10
			row_force_default:True
			row_default_height:88
			Button:
				id:tg_btn
				text: '保存并返回控制界面'
				color: 1,1,1,1
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				on_press:root.press_save()
			Label:
				text: ''

		GridLayout:
			cols: 3
			spacing:10
			padding:10,0,10,60
			row_force_default:True
			row_default_height:58

			Label:
				text:'延迟进水'
				font_size: 30
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			Label:
				text:'断水延迟'
				font_size: 30
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			Label:
				text:'搅拌传送'
				font_size: 30
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'

			amButton:
				text:'+'
				on_press:root.press_am("time1",1)
			amButton:
				text:'+'
				on_press:root.press_am("time3",1)
			amButton:
				text:'+'
				on_press:root.press_am("time4",1)

			TextInput:
				id:_time1
				text: '1'
				multiline:False
				font_size: 40
				padding:40,5,5,0
				#on_focus:root.on_focus()
				#on_text:root.on_text(self.text)
			TextInput:
				id:_time3
				text: '2'
				multiline:False
				font_size: 40
				padding:40,5,5,0
				#on_focus:root.on_focus()
				#on_text:root.on_text(self.text)
			TextInput:
				id:_time4
				text: '10'
				multiline:False
				font_size: 40
				padding:40,5,5,0
				#on_focus:root.on_focus()
				#on_text:root.on_text(self.text)

			amButton:
				text:'-'
				on_press:root.press_am("time1",-1)
			amButton:
				text:'-'
				on_press:root.press_am("time3",-1)
			amButton:
				text:'-'
				on_press:root.press_am("time4",-1)

		GridLayout:
			cols: 3
			spacing:10
			padding:10,0,10,60
			row_force_default:True
			row_default_height:58

			Label:
				text:'面条长度'
				font_size: 32
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			Label:
				text:'时间'
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			Label:
				text:'传送延时'
				font_size: 30
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'

			amButton:
				text:'+'
				on_press:root.press_am("time2",1)
			amButton:
				text:'+'
				on_press:root.press_am("time5",1)
			amButton:
				text:'+'
				on_press:root.press_am("time6",1)

			TextInput:
				id:_time2
				text: '55'
				multiline:False
				font_size: 40
				padding:40,5,5,0
				#on_focus:root.on_focus()
				#on_text:root.on_text(self.text)
			TextInput:
				id:_time5
				text: '12'
				multiline:False
				font_size: 40
				padding:40,5,5,0
				#on_focus:root.on_focus()
				#on_text:root.on_text(self.text)
			TextInput:
				id:_time6
				text: '3'
				multiline:False
				font_size: 40
				padding:40,5,5,0
				#on_focus:root.on_focus()
				#on_text:root.on_text(self.text)

			amButton:
				text:'-'
				on_press:root.press_am("time2",-1)
			amButton:
				text:'-'
				on_press:root.press_am("time5",-1)
			amButton:
				text:'-'
				on_press:root.press_am("time6",-1)


<MyscreenApp>:
	lb1:_lb_1.__self__
	lb2:_lb_2.__self__
	lb3:_lb_3.__self__
	txt3:_txt3.__self__
	setbtn:set_btn.__self__
	tgbtn:tg_btn.__self__
	lbtime2:_lbt2.__self__
	lbtime5:_lbt5.__self__
	btnb1:_btn_b1.__self__
	btnb2:_btn_b2.__self__
	btnb3:_btn_b3.__self__

	name:'menu'
	FloatLayout:

		GridLayout:
			cols: 3
			spacing:10
			padding:10,50,10,10
			row_force_default:True
			row_default_height:58
			
			Label:
				id:_lb_1
				text: '状态'
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				color: 1,1,1,1
				font_size: 32
				bkcolor:[1,0,0,.5]
				canvas:
					Color:
						rgba:self.bkcolor
					Ellipse:
						pos:self.pos[0]+self.size[0]/7,self.pos[1]-self.size[0]/6
						size:self.size[0]*0.75,self.size[0]*0.7
			Label:
				id:_lb_2
				text: '可运行'
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				color: 1,1,1,1
				font_size: 32
				bkcolor:[1,0,0,.5]
				canvas:
					Color:
						rgba:self.bkcolor
					Ellipse:
						pos:self.pos[0]+self.size[0]/7,self.pos[1]-self.size[0]/6
						size:self.size[0]*0.75,self.size[0]*0.7
			Label:
				id:_lb_3
				text: '控制杆'
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				color: 1,1,1,1
				font_size: 32
				bkcolor:[1,0,0,.5]
				canvas:
					Color:
						rgba:self.bkcolor
					Ellipse:
						pos:self.pos[0]+self.size[0]/7,self.pos[1]-self.size[0]/6
						size:self.size[0]*0.75,self.size[0]*0.7

		GridLayout:
			cols: 3
			spacing:10
			padding:10,50,10,10
			pos_hint:{'x':0,'y':.31}

			Label:
				text:'面条长度'
				font_size: 32
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			Label:
				text:'时间'
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			Label:
				text:'份数'
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'

		GridLayout:
			cols: 3
			spacing:10
			padding:10,50,10,10
			size_hint:1,.35
			pos_hint:{'x':0,'y':.45}

			Label:
				text: ''
			Label:
				text: ''
			Button:
				id:_txt3_ba
				text:'+'
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				pos: 0, 100
				size: 100, 50
				color: .8,.9,0,1
				font_size: 32
				on_press:root.press_am("txt3",1)

			Label:
				id:_lbt2
				text:'4'
				font_size: 32
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			Label:
				id:_lbt5
				text:'5'
				font_size: 32
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			TextInput:
				id:_txt3
				text: '0'
				multiline:False
				font_size: 40
				padding:40,5,5,0
				on_focus:root.on_focus()
				on_text:root.on_text2(self.text)

			Label:
				text: ''
			Label:
				text: ''
			Button:
				id:_txt3_bm
				text:'-'
				font_size: 40
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				pos: 0, 100
				size: 100, 50
				color: .8,.9,0,1
				font_size: 32
				on_press:root.press_am("txt3",-1)

		ToggleButton:
			id:tg_btn
			text: '开始运行'
			color: 1,1,1,1
			font_size: 40
			size_hint:1,.15
			pos_hint:{'x':0,'y':.3}
			font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			on_press:root.press_tgb()

		GridLayout:
			cols: 3
			spacing:10
			padding:10
			size_hint:1,.15
			pos_hint:{'x':0,'y':.15}
			
			ToggleButton:
				id:_btn_b1
				text:'漏斗'
				font_size: 40
				size_hint:1,.1
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				color: .8,.9,0,1
				on_press:root.press_btn_b1(_btn_b1)
				
			ToggleButton:
				id:_btn_b2
				text:'水泵'
				font_size: 40
				size_hint:1,.1
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				color: .8,.9,0,1
				on_press:root.press_btn_b2(_btn_b2)
				
			Button:
				id:_btn_b3
				text:'滚筒'
				font_size: 40
				size_hint:1,.1
				font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
				color: .8,.9,0,1
				on_press:root.press_btn_b3(_btn_b3)
				on_release:root.release_btn_b3(_btn_b3)

			
		Button:
			id:set_btn
			text: '设置'
			color: 1,1,1,1
			font_size: 40
			size_hint:1,.15
			font_name:'/usr/share/fonts/truetype/wqy/wqy-microhei.ttc'
			on_press:root.press_set()
